<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>FitnessSphere — Home</title>
  <meta name="description" content="FitnessSphere — The Ultimate Fitness tool. Clean, fast, and focused.">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800;900&display=swap" rel="stylesheet">

  <style>
  /* ======================================================================
     FitnessSphere — index.html (consolidated, optimized)
     - Header: brand + logo + 3-line burger only (menu fixed & smooth)
     - Big animated hero title: “The Ultimate Fitness tool”
     - Cards separated clearly, brighter gradients (mint + sage + deep green)
     - Input fields upgraded (no underlines anywhere)
     - Charts responsive (no side-by-side on small screens, no infinite white)
     - Daily Habits: complete -> item hides w/ “Good job!” card, returns next day
     - No “Quick action” chips in the menu
     - Removed the older “people review” block as requested
     - Animations across sections, microinteractions, gradient strokes
     ====================================================================== */

  :root{
    /* Core palette */
    --bg-900:#071018; --bg-850:#09131c; --bg-800:#0b1722;
    --text:#eafff7; --text-dim:rgba(234,255,247,.76);

    /* Mints + sages */
    --mint-a:#49f0c6; --mint-b:#5dd6f2; --mint-c:#29d9a3;
    --sage-300:#cfeadb; --sage-350:#b7dfcc; --sage-450:#8cc2ad; --sage-600:#3d7b67;
    --deep:#063f35;

    --border:rgba(255,255,255,.06);
    --glass:rgba(255,255,255,.03);
    --glow:rgba(16,193,138,.18);

    --radius:14px; --radius-lg:18px;
    --shadow-1:0 10px 28px rgba(0,0,0,.55);
    --shadow-2:0 24px 60px rgba(0,0,0,.7);

    --maxw:1180px;
    --ease:cubic-bezier(.22,.9,.22,1);
  }

  *{box-sizing:border-box}
  html,body{height:100%;margin:0}
  body{
    font-family:'Inter',system-ui,-apple-system,"Segoe UI",Roboto,Arial;
    color:var(--text);
    background:
      radial-gradient(800px 500px at 8% 10%, rgba(41,217,163,.06), transparent 40%),
      linear-gradient(180deg,var(--bg-900),var(--bg-850));
    -webkit-font-smoothing:antialiased;
    text-rendering:optimizeLegibility;
    overflow-x:hidden;
  }

  a{color:inherit;text-decoration:none;outline:none}
  button{font:inherit;color:inherit;background:none;border:0;cursor:pointer}
  img{max-width:100%;display:block}

  .container{width:min(var(--maxw),94%);margin:0 auto}

  /* -------------------- header -------------------- */
  header.site-header{
    position:sticky;top:0;z-index:1000;
    background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,.02));
    backdrop-filter:blur(10px) saturate(120%);
    border-bottom:1px solid var(--border);
  }
  .head-row{display:flex;align-items:center;justify-content:space-between;padding:10px 4px}
  .brand{display:flex;align-items:center;gap:12px}
  .brand img{height:44px;border-radius:10px;background:#fff;filter:drop-shadow(0 6px 16px rgba(0,0,0,.5))}
  .brand .site-name{font-weight:900;color:var(--mint-c);letter-spacing:.3px}

  .burger{width:48px;height:48px;border-radius:12px;display:grid;place-items:center;background:rgba(255,255,255,.03);border:1px solid var(--border)}
  .burger .lines{width:24px;height:16px;position:relative}
  .burger .lines span{position:absolute;left:0;right:0;height:2px;border-radius:2px;background:linear-gradient(90deg,var(--mint-a),var(--mint-b));
    transition:transform .22s var(--ease),opacity .16s var(--ease)}
  .burger .lines span:nth-child(1){top:0}
  .burger .lines span:nth-child(2){top:7px}
  .burger .lines span:nth-child(3){top:14px}
  .burger.open .lines span:nth-child(1){transform:translateY(7px) rotate(45deg)}
  .burger.open .lines span:nth-child(2){opacity:0}
  .burger.open .lines span:nth-child(3){transform:translateY(-7px) rotate(-45deg)}

  /* -------------------- fullscreen menu -------------------- */
  .menu-wrap{position:fixed;inset:0;display:none;background:rgba(0,0,0,.55);z-index:1100}
  .menu-wrap.show{display:block}
  .menu-panel{
    position:fixed;left:0;right:0;top:0;max-height:100vh;height:100vh;
    background:linear-gradient(120deg,var(--mint-a),var(--mint-b));
    color:#023328;border:1px solid rgba(255,255,255,.05);
    box-shadow:var(--shadow-2);
    display:flex;flex-direction:column;
    -webkit-overflow-scrolling:touch;
  }
  .menu-close{position:absolute;right:14px;top:14px;padding:8px 10px;border-radius:12px;background:rgba(255,255,255,.1);font-weight:800}
  .menu-inner{overflow:auto;padding:20px;overscroll-behavior:contain}
  .menu-head{display:flex;align-items:center;gap:10px;margin-bottom:10px}
  .menu-head img{height:44px;border-radius:10px;background:#fff;padding:6px}
  .menu-title{font-weight:900}
  .menu-grid{display:grid;grid-template-columns:1fr 1fr;gap:20px}
  .menu-grid a{display:block;padding:14px 10px;border-radius:12px;color:#053c31;font-weight:900;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.08)}
  .menu-grid a:hover{background:rgba(255,255,255,.12)}
  @media (min-width:940px){
    .menu-panel{left:50%;transform:translateX(-50%);top:50%;max-height:86vh;height:auto;border-radius:16px}
  }

  /* -------------------- hero -------------------- */
  .section{padding:52px 0}
  .divider{height:6px;border-radius:999px;background:linear-gradient(90deg,var(--mint-a),var(--mint-b));box-shadow:0 8px 28px var(--glow);margin:18px 0}
  .hero{padding:84px 0 24px}
  .hero-row{display:flex;gap:28px;align-items:flex-start;justify-content:space-between;flex-wrap:wrap}
  .chip{display:inline-block;padding:9px 14px;border-radius:999px;background:linear-gradient(90deg,var(--mint-a),var(--mint-c));color:#062e27;font-weight:900;box-shadow:0 12px 32px var(--glow)}
  .hero h1{
    margin:16px 0 10px;font-weight:900;line-height:1.02;
    font-size:clamp(1.9rem,7.5vw,4.8rem);
    white-space:nowrap;overflow:hidden;text-overflow:ellipsis;
    background:linear-gradient(90deg,var(--mint-a),var(--mint-b));
    -webkit-background-clip:text;color:transparent;background-size:200% 100%;
    animation:gradShift 5s ease-in-out infinite;
    filter:drop-shadow(0 22px 40px rgba(6,55,46,.25));
    opacity:0;transform:translateY(14px) scale(.98);
    transition:opacity .6s var(--ease),transform .6s var(--ease);
  }
  .hero h1.show{opacity:1;transform:translateY(0) scale(1)}
  @keyframes gradShift{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
  .lead{color:var(--text-dim);max-width:700px;margin:0 0 10px}
  .cta-row{display:flex;gap:12px;flex-wrap:wrap;margin-top:12px}
  .btn{padding:12px 18px;border-radius:14px;font-weight:900;display:inline-flex;align-items:center;justify-content:center;gap:8px;transition:transform .2s var(--ease),box-shadow .2s var(--ease)}
  .btn:active{transform:translateY(1px)}
  .btn.accent{background:linear-gradient(90deg,var(--mint-a),var(--mint-b));color:#062e27;box-shadow:0 16px 38px var(--glow)}
  .btn.ghost{border:1px solid var(--border);color:var(--mint-a);background:rgba(255,255,255,.02)}

  /* right hero card */
  .glass{background:var(--glass);border:1px solid var(--border);border-radius:16px;padding:14px}
  .mini-chart{height:220px;border-radius:10px;overflow:hidden}

  /* -------------------- feature cards -------------------- */
  .features-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:18px}
  .card{
    position:relative;padding:18px;border-radius:14px;border:1px solid var(--border);
    background:
      radial-gradient(600px 200px at -10% -10%, rgba(73,240,198,.15), transparent 40%),
      radial-gradient(600px 200px at 110% 120%, rgba(93,214,242,.12), transparent 40%),
      linear-gradient(180deg,rgba(255,255,255,.02),transparent);
    box-shadow:0 18px 50px rgba(0,0,0,.55);
    transition:transform .32s var(--ease),box-shadow .32s var(--ease),opacity .42s var(--ease);
    opacity:0;transform:translateY(10px);
    min-height:120px;
  }
  .card.show{opacity:1;transform:translateY(0)}
  .card:hover{transform:translateY(-8px);box-shadow:0 28px 70px rgba(0,0,0,.65)}
  .card h3{margin:0 0 8px;color:#e9fff9}
  .card p{margin:0;color:var(--sage-350)}
  /* vertical separators on wide screens */
  @media (min-width:880px){
    .features-grid>.card:not(:nth-child(3n))::after{
      content:"";position:absolute;top:10px;right:-9px;width:2px;height:calc(100% - 20px);
      background:linear-gradient(180deg,rgba(255,255,255,.08),rgba(255,255,255,.02));border-radius:2px;opacity:.55
    }
  }

  /* -------------------- chart area (never two big charts on same row at small widths) -------------------- */
  .chart-grid{display:grid;grid-template-columns:1fr 380px;gap:18px;align-items:start}
  @media (max-width:980px){.chart-grid{grid-template-columns:1fr}}
  .chart-card{display:flex;gap:12px;align-items:stretch;padding:14px;border-radius:14px;border:1px solid var(--border);background:var(--glass)}
  .chart-wrap{width:100%;height:260px;border-radius:10px;overflow:hidden}
  .chart-wrap canvas{width:100%;height:100%;display:block}

  /* -------------------- testimonials (kept minimal, auto-scroll and controllable) -------------------- */
  .t-wrap{overflow:hidden;border-radius:14px}
  .t-track{display:flex;gap:12px;transition:transform .7s var(--ease)}
  .t{min-width:260px;padding:14px;border-radius:12px;border:1px solid var(--border);background:var(--glass)}

  /* -------------------- daily habits -------------------- */
  .habits{display:flex;flex-direction:column;gap:12px}
  .habit-card{padding:16px;border-radius:14px;border:1px solid var(--border);background:var(--glass)}
  .habit-row{display:flex;align-items:center;justify-content:space-between;gap:12px}
  .habit-left{display:flex;align-items:center;gap:12px}
  .toggle{width:48px;height:28px;border-radius:999px;background:rgba(255,255,255,.06);border:1px solid var(--border);position:relative;transition:background .2s var(--ease)}
  .toggle i{position:absolute;left:3px;top:3px;width:22px;height:22px;border-radius:50%;background:#fff;transition:transform .22s var(--ease)}
  .toggle.on{background:linear-gradient(90deg,var(--mint-a),var(--mint-b));box-shadow:0 12px 32px var(--glow)}
  .toggle.on i{transform:translateX(20px)}
  .bar{height:10px;border-radius:999px;background:rgba(255,255,255,.06);overflow:hidden}
  .bar > b{display:block;height:100%;width:0%;background:linear-gradient(90deg,var(--mint-a),var(--mint-b));transition:width .4s var(--ease)}
  .done-card{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-top:10px;padding:12px;border:1px dashed rgba(73,240,198,.45);border-radius:12px;background:linear-gradient(180deg,rgba(73,240,198,.06),rgba(93,214,242,.06));opacity:0;transform:translateY(-6px);animation:pop .45s var(--ease) forwards}
  @keyframes pop{to{opacity:1;transform:translateY(0)}}

  /* -------------------- inputs (pretty, no underlines anywhere) -------------------- */
  input[type="text"], input[type="email"], textarea{
    background:linear-gradient(180deg,rgba(255,255,255,.028),rgba(255,255,255,.02));
    border:1px solid rgba(30,140,110,.18);
    padding:12px 14px;border-radius:12px;color:var(--text);min-width:0;outline:none;
    transition:box-shadow .2s var(--ease),border-color .2s var(--ease),transform .16s var(--ease)
  }
  input::placeholder, textarea::placeholder{color:rgba(255,255,255,.42)}
  input:focus, textarea:focus{box-shadow:0 12px 34px var(--glow);border-color:rgba(16,193,138,.5);transform:translateY(-1px)}
  a,button{border-bottom:none} /* absolutely no underlines */

  /* -------------------- footer -------------------- */
  footer{padding:40px 0;border-top:1px solid var(--border);margin-top:24px}
  small.muted{color:var(--text-dim)}

  /* helpers */
  .mt-2{margin-top:8px}.mt-3{margin-top:12px}.mt-4{margin-top:16px}.mt-5{margin-top:20px}
  .mb-1{margin-bottom:4px}.mb-2{margin-bottom:8px}.mb-3{margin-bottom:12px}.mb-4{margin-bottom:16px}
  .tag{display:inline-block;padding:6px 10px;border-radius:999px;background:rgba(255,255,255,.06);border:1px solid var(--border);color:var(--sage-350);font-weight:700}
  </style>
</head>
<body>

  <!-- progress bar -->
  <div id="scrollProgress" style="position:fixed;left:0;top:0;height:3px;width:0%;z-index:1200;background:linear-gradient(90deg,var(--mint-a),var(--mint-b));box-shadow:0 6px 20px var(--glow)"></div>

  <!-- header -->
  <header class="site-header">
    <div class="container head-row">
      <a class="brand" href="index.html" aria-label="FitnessSphere home">
        <img src="logo.png" alt="FitnessSphere logo">
        <div class="site-name">FitnessSphere</div>
      </a>
      <button id="burger" class="burger" aria-controls="menu" aria-expanded="false" aria-label="Open menu">
        <div class="lines" aria-hidden="true"><span></span><span></span><span></span></div>
      </button>
    </div>
  </header>

  <!-- fullscreen menu -->
  <div id="menu" class="menu-wrap" aria-hidden="true">
    <div class="menu-panel" role="dialog" aria-label="Main menu">
      <button id="menuClose" class="menu-close" aria-label="Close">Close</button>
      <div class="menu-inner">
        <div class="menu-head">
          <img src="logo.png" alt="">
          <div class="menu-title">FitnessSphere</div>
        </div>
        <nav class="menu-grid" aria-label="Primary">
          <a href="index.html">Home</a>
          <a href="weight-loss.html">Weight Loss</a>
          <a href="calories.html">Calories</a>
          <a href="exercises.html">Exercises</a>
          <a href="weight-gain.html">Weight Gain</a>
          <a href="premium.html">Premium</a>
          <a href="#habits">Daily Habits</a>
          <a href="#contact">Contact</a>
        </nav>
        <!-- (intentionally NO quick action chips here) -->
      </div>
    </div>
  </div>

  <main>
    <!-- hero -->
    <section class="section hero" aria-labelledby="heroTitle">
      <div class="container">
        <div class="hero-row">
          <div style="flex:1;min-width:260px">
            <span class="chip">Train Smart. Live Well.</span>
            <h1 id="heroTitle">The Ultimate Fitness tool</h1>
            <p class="lead">Focused, fast, and simple. Each tool lives on its own page so this home stays clean and easy to navigate.</p>
            <div class="cta-row">
              <a class="btn accent" href="calories.html">Open Calorie Tracker</a>
              <a class="btn ghost" href="exercises.html">Browse Exercises</a>
            </div>
          </div>

          <div style="flex:1;min-width:280px">
            <div class="glass">
              <h3 class="mb-1" style="color:var(--sage-350)">Quick snapshot</h3>
              <small class="mb-2" style="display:block;color:var(--text-dim)">Today • 1,240 kcal • Steps 4,200</small>
              <div class="mini-chart"><canvas id="heroMini"></canvas></div>
            </div>
          </div>
        </div>
        <div class="divider" aria-hidden="true"></div>
      </div>
    </section>

    <!-- what we do (cards) -->
    <section class="section" aria-labelledby="whatTitle">
      <div class="container">
        <div class="mb-3" style="display:flex;align-items:flex-end;justify-content:space-between;gap:12px;flex-wrap:wrap">
          <div>
            <h2 id="whatTitle" class="mb-1" style="color:var(--sage-300)">What FitnessSphere does</h2>
            <small style="color:var(--text-dim)">Tap a card to open the page</small>
          </div>
          <span class="tag">Mint gradient UI • Smooth micro-animations</span>
        </div>

        <div class="features-grid">
          <a class="card" href="calories.html">
            <h3>Calorie Tracker</h3>
            <p>Log foods, view totals & macros. Export CSV. Full tool on the Calories page.</p>
          </a>
          <a class="card" href="exercises.html">
            <h3>Exercise Library</h3>
            <p>Search, filter by muscle group, save favorites, and build quick workouts.</p>
          </a>
          <a class="card" href="weight-loss.html">
            <h3>Weight Loss</h3>
            <p>Structured deficit programs and cardio templates to stay consistent.</p>
          </a>
          <a class="card" href="weight-gain.html">
            <h3>Weight Gain</h3>
            <p>Surplus strategies, protein-focused meals, and strength templates.</p>
          </a>
          <a class="card" href="premium.html">
            <h3>Premium</h3>
            <p>Cloud sync, advanced analytics, and export/backup tools.</p>
          </a>
        </div>

        <div class="divider" aria-hidden="true"></div>
      </div>
    </section>

    <!-- analytics preview (animated charts; no overflow) -->
    <section class="section" aria-labelledby="chartsTitle">
      <div class="container">
        <h2 id="chartsTitle" class="mb-2" style="color:var(--sage-300)">Quick analytics</h2>
        <small class="mb-3" style="display:block;color:var(--text-dim)">Animated preview — tap a chart area to open full analytics (Premium).</small>

        <div class="chart-grid">
          <div class="chart-card">
            <div class="chart-wrap"><canvas id="lineChart"></canvas></div>
          </div>
          <div class="chart-card">
            <div class="chart-wrap"><canvas id="pieChart"></canvas></div>
          </div>
        </div>

        <div class="divider" aria-hidden="true"></div>
      </div>
    </section>

    <!-- testimonials kept lightweight (still controllable) -->
    <section class="section" id="testimonials" aria-labelledby="tTitle">
      <div class="container">
        <h2 id="tTitle" class="mb-2" style="color:var(--sage-300)">What athletes say</h2>
        <div class="t-wrap glass">
          <div id="tTrack" class="t-track">
            <div class="t">“The UI keeps me focused. Love the gradients.”</div>
            <div class="t">“Separate pages = zero clutter. Perfect on phone.”</div>
            <div class="t">“Daily habits with the ‘good job’ card = addicting.”</div>
            <div class="t">“Charts have just enough motion — clean.”</div>
          </div>
        </div>
        <div class="divider" aria-hidden="true"></div>
      </div>
    </section>

    <!-- daily habits -->
    <section class="section" id="habits" aria-labelledby="hTitle">
      <div class="container">
        <h2 id="hTitle" class="mb-2" style="color:var(--sage-300)">Daily Habits</h2>
        <small class="mb-3" style="display:block;color:var(--text-dim)">Toggle small tasks. Completed ones disappear with a message and come back tomorrow.</small>

        <div class="habits">
          <div class="habit-card" data-habit="water">
            <div class="habit-row">
              <div class="habit-left">
                <div class="toggle" role="switch" aria-checked="false" tabindex="0"><i></i></div>
                <div>
                  <div style="font-weight:800">Drink 2L water</div>
                  <small class="muted" style="color:var(--text-dim)">Hydration fuels recovery</small>
                </div>
              </div>
              <div style="flex:1;max-width:380px">
                <div class="bar"><b style="width:0%"></b></div>
              </div>
            </div>
            <div class="done-slot"></div>
          </div>

          <div class="habit-card" data-habit="protein">
            <div class="habit-row">
              <div class="habit-left">
                <div class="toggle" role="switch" aria-checked="false" tabindex="0"><i></i></div>
                <div>
                  <div style="font-weight:800">Protein target</div>
                  <small class="muted" style="color:var(--text-dim)">Hit your grams for the day</small>
                </div>
              </div>
              <div style="flex:1;max-width:380px">
                <div class="bar"><b style="width:0%"></b></div>
              </div>
            </div>
            <div class="done-slot"></div>
          </div>

          <div class="habit-card" data-habit="walk">
            <div class="habit-row">
              <div class="habit-left">
                <div class="toggle" role="switch" aria-checked="false" tabindex="0"><i></i></div>
                <div>
                  <div style="font-weight:800">30 min walk</div>
                  <small class="muted" style="color:var(--text-dim)">NEAT adds up fast</small>
                </div>
              </div>
              <div style="flex:1;max-width:380px">
                <div class="bar"><b style="width:0%"></b></div>
              </div>
            </div>
            <div class="done-slot"></div>
          </div>

          <div class="habit-card" data-habit="strength">
            <div class="habit-row">
              <div class="habit-left">
                <div class="toggle" role="switch" aria-checked="false" tabindex="0"><i></i></div>
                <div>
                  <div style="font-weight:800">Strength session</div>
                  <small class="muted" style="color:var(--text-dim)">Move some iron</small>
                </div>
              </div>
              <div style="flex:1;max-width:380px">
                <div class="bar"><b style="width:0%"></b></div>
              </div>
            </div>
            <div class="done-slot"></div>
          </div>
        </div>

        <div class="divider" aria-hidden="true"></div>
      </div>
    </section>

    <!-- contact -->
    <section class="section" id="contact" aria-labelledby="cTitle">
      <div class="container">
        <h2 id="cTitle" class="mb-2" style="color:var(--sage-300)">Contact & Support</h2>
        <div class="glass">
          <div style="display:grid;grid-template-columns:1fr 1fr 120px;gap:12px;align-items:center">
            <input type="email" id="cEmail" placeholder="your@email.com" aria-label="Your email">
            <input type="text" id="cMsg" placeholder="Short message" aria-label="Your message">
            <button class="btn accent" id="cSend">Send</button>
          </div>
          <small id="cNote" class="mt-3" style="display:block;color:var(--text-dim)">We reply quickly.</small>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="container" style="display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap">
      <div style="display:flex;align-items:center;gap:10px">
        <img src="logo.png" alt="" style="height:34px;border-radius:8px;background:#fff">
        <div>
          <small class="muted">© 2025 FitnessSphere</small>
        </div>
      </div>
      <div style="display:flex;gap:18px">
        <a href="#" class="muted">Privacy</a>
        <a href="#" class="muted">Terms</a>
      </div>
    </div>
  </footer>

  <script>
  /* ===== util ===== */
  const qs = (s, p=document) => p.querySelector(s);
  const qsa = (s, p=document) => [...p.querySelectorAll(s)];
  const clamp = (n, a, b)=>Math.max(a,Math.min(b,n));

  /* ===== header menu ===== */
  const burger = qs('#burger');
  const menuWrap = qs('#menu');
  const menuClose = qs('#menuClose');

  const openMenu = () => {
    burger.classList.add('open');
    menuWrap.classList.add('show');
    document.body.style.overflow = 'hidden'; // prevent background scroll
    burger.setAttribute('aria-expanded','true');
    menuWrap.setAttribute('aria-hidden','false');
  };
  const closeMenu = () => {
    burger.classList.remove('open');
    menuWrap.classList.remove('show');
    document.body.style.overflow = '';
    burger.setAttribute('aria-expanded','false');
    menuWrap.setAttribute('aria-hidden','true');
  };
  burger.addEventListener('click', () => menuWrap.classList.contains('show') ? closeMenu() : openMenu());
  menuClose.addEventListener('click', closeMenu);
  menuWrap.addEventListener('click', (e)=>{ if(e.target===menuWrap) closeMenu(); });

  /* ===== scroll progress ===== */
  const sp = qs('#scrollProgress');
  const onScroll = () => {
    const h = document.documentElement;
    const max = h.scrollHeight - h.clientHeight;
    const pct = max > 0 ? (h.scrollTop / max)*100 : 0;
    sp.style.width = pct + '%';
  };
  document.addEventListener('scroll', onScroll,{passive:true}); onScroll();

  /* ===== hero reveal ===== */
  const heroTitle = qs('#heroTitle');
  const lead = qs('.lead');
  const io = new IntersectionObserver((entries)=>{
    entries.forEach(e=>{
      if(e.isIntersecting){ e.target.classList.add('show'); io.unobserve(e.target); }
    });
  },{threshold:.2});
  io.observe(heroTitle); io.observe(lead);

  /* ===== card reveals ===== */
  const cards = qsa('.card');
  const io2 = new IntersectionObserver((ents)=>{
    ents.forEach(e=>{ if(e.isIntersecting){ e.target.classList.add('show'); io2.unobserve(e.target);} });
  },{threshold:.15});
  cards.forEach(c=>io2.observe(c));

  /* ===== lightweight charts (no libs) ===== */
  function drawLineChart(canvas){
    const ctx = canvas.getContext('2d');
    const DPR = devicePixelRatio||1;
    const w = canvas.clientWidth, h = canvas.clientHeight;
    canvas.width = w*DPR; canvas.height = h*DPR; ctx.scale(DPR,DPR);
    ctx.clearRect(0,0,w,h);

    // axes (subtle)
    ctx.strokeStyle = 'rgba(255,255,255,.08)';
    ctx.lineWidth = 1;
    ctx.beginPath(); ctx.moveTo(12,h-24); ctx.lineTo(w-8,h-24); ctx.stroke();

    // data
    const pts = [0.18,0.62,0.28,0.42,0.68,0.52,0.80];
    const pad = 16;
    const step = (w - pad*2)/(pts.length-1);

    // gradient line
    const grad = ctx.createLinearGradient(0,0,w,0);
    grad.addColorStop(0,'#49f0c6'); grad.addColorStop(1,'#5dd6f2');

    // animate
    let t=0;
    function frame(){
      t = clamp(t+0.02,0,1);
      ctx.clearRect(0,0,w,h);
      ctx.strokeStyle = 'rgba(255,255,255,.08)';
      ctx.beginPath(); ctx.moveTo(12,h-24); ctx.lineTo(w-8,h-24); ctx.stroke();

      ctx.lineWidth=3; ctx.strokeStyle=grad; ctx.beginPath();
      pts.forEach((p,i)=>{
        const x = pad + i*step;
        const y = pad + (1-p)*(h-pad*2);
        const yEased = pad + (1-(p*t))*(h-pad*2); // ease in
        if(i===0) ctx.moveTo(x,yEased); else ctx.lineTo(x,yEased);
      });
      ctx.stroke();

      // points
      ctx.fillStyle='#eafff7';
      pts.forEach((p,i)=>{
        const x = pad + i*step;
        const y = pad + (1-(p*t))*(h-pad*2);
        ctx.beginPath(); ctx.arc(x,y,4,0,Math.PI*2); ctx.fill();
      });

      if(t<1) requestAnimationFrame(frame);
    }
    frame();
  }

  function drawPieChart(canvas){
    const ctx = canvas.getContext('2d');
    const DPR = devicePixelRatio||1;
    const w = canvas.clientWidth, h = canvas.clientHeight;
    canvas.width = w*DPR; canvas.height = h*DPR; ctx.scale(DPR,DPR);
    ctx.clearRect(0,0,w,h);

    const cx=w/2, cy=h/2, r=Math.min(w,h)/3;
    const parts=[0.35,0.42,0.23]; // protein, carbs, fat
    const colors=['#29d9a3','#49f0c6','#5dd6f2'];

    let a0=-Math.PI/2; let t=0;
    function frame(){
      t = clamp(t+0.02,0,1);
      ctx.clearRect(0,0,w,h);
      parts.forEach((p,i)=>{
        const a1 = a0 + p*Math.PI*2*t;
        ctx.beginPath(); ctx.moveTo(cx,cy); ctx.arc(cx,cy,r,a0,a1); ctx.closePath();
        ctx.fillStyle=colors[i]; ctx.globalAlpha=0.9; ctx.fill(); ctx.globalAlpha=1;
        a0 = a1;
      });
      a0 = -Math.PI/2;
      if(t<1) requestAnimationFrame(frame);
    }
    frame();
  }

  const heroMini = qs('#heroMini');
  const lineCanvas = qs('#lineChart');
  const pieCanvas = qs('#pieChart');

  const resizeCharts = () => {
    [heroMini,lineCanvas,pieCanvas].forEach(cv=>{
      if(!cv) return;
      // redraw on resize
      if(cv.id==='heroMini') drawLineChart(cv);
      if(cv.id==='lineChart') drawLineChart(cv);
      if(cv.id==='pieChart') drawPieChart(cv);
    });
  };
  window.addEventListener('resize', ()=>{ clearTimeout(window._rz); window._rz=setTimeout(resizeCharts,120); });
  window.addEventListener('load', resizeCharts);

  /* ===== testimonials auto-scroll (controllable) ===== */
  const track = qs('#tTrack');
  let tIndex = 0;
  function tick(){
    const items = qsa('.t', track);
    if(items.length<1) return;
    tIndex = (tIndex+1)%items.length;
    track.style.transform = `translateX(${-tIndex*(items[0].offsetWidth+12)}px)`;
  }
  let tTimer = setInterval(tick, 2400);
  track.addEventListener('pointerenter',()=>clearInterval(tTimer));
  track.addEventListener('pointerleave',()=>tTimer=setInterval(tick,2400));

  /* ===== daily habits logic =====
     - Complete -> hide row, show "Good job" card
     - Persist per day; next day resets automatically
  */
  const DAY_KEY = 'fs_day_key';
  const HABIT_KEY = 'fs_habits_state';

  function todayKey(){
    const d = new Date();
    return `${d.getFullYear()}-${d.getMonth()+1}-${d.getDate()}`;
  }

  function maybeReset(){
    const d = localStorage.getItem(DAY_KEY);
    const tk = todayKey();
    if(d!==tk){
      localStorage.setItem(DAY_KEY, tk);
      localStorage.setItem(HABIT_KEY, JSON.stringify({})); // reset all
    }
  }
  maybeReset();

  function loadState(){
    try { return JSON.parse(localStorage.getItem(HABIT_KEY)||'{}'); }
    catch(e){ return {}; }
  }
  function saveState(state){ localStorage.setItem(HABIT_KEY, JSON.stringify(state)); }

  function renderHabit(card, isDone){
    const toggle = qs('.toggle', card);
    const bar = qs('.bar > b', card);
    const slot = qs('.done-slot', card);

    if(isDone){
      // hide main row, show congrats card
      card.querySelector('.habit-row').style.display='none';
      slot.innerHTML = `
        <div class="done-card">
          <div><strong>Good job!</strong> Task completed for today.</div>
          <span class="tag">Returns tomorrow</span>
        </div>`;
    }else{
      card.querySelector('.habit-row').style.display='';
      slot.innerHTML = '';
    }
    // reset visuals
    toggle.classList.toggle('on', isDone);
    toggle.setAttribute('aria-checked', isDone?'true':'false');
    bar.style.width = isDone ? '100%' : '0%';
  }

  function initHabits(){
    const state = loadState();
    qsa('.habit-card').forEach(card=>{
      const key = card.getAttribute('data-habit');
      const isDone = !!state[key];
      renderHabit(card, isDone);

      const toggle = qs('.toggle', card);
      const bar = qs('.bar > b', card);

      function complete(){
        state[key] = true;
        saveState(state);
        // animate bar then render
        bar.style.width = '100%';
        setTimeout(()=>renderHabit(card,true), 240);
      }

      toggle.addEventListener('click', ()=>{
        if(state[key]) return; // already done today
        complete();
      });
      toggle.addEventListener('keydown', (e)=>{
        if(e.key==='Enter' || e.key===' '){ e.preventDefault(); if(!state[key]) complete(); }
      });
    });
  }
  initHabits();

  /* ===== contact (demo only) ===== */
  qs('#cSend').addEventListener('click', ()=>{
    const em = qs('#cEmail').value.trim();
    const msg = qs('#cMsg').value.trim();
    if(!em || !msg){ qs('#cNote').textContent = 'Please add email and a short message.'; return; }
    qs('#cNote').textContent = 'Thanks! We will get back to you shortly.';
    qs('#cEmail').value = ''; qs('#cMsg').value='';
  });

  /* Prevent any accidental huge white space due to images/canvas:
     - we redraw charts on load/resize and set canvas display:block; height fixed via CSS.
     - no remote images besides logo.png. */
  </script>
</body>
</html>
