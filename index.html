<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Your Fitness — Home</title>
<meta name="description" content="Track calories, explore exercises, and hit your fitness goals with a clean, premium experience." />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
  :root{
    /* Mint-forward palette */
    --mint-50:#edfff8;
    --mint-100:#d7ffef;
    --mint-200:#b9ffe3;
    --mint-300:#8ef7d1;
    --mint-400:#5ce7bd;
    --mint-500:#2ed3a8;
    --mint-600:#15b893;
    --mint-700:#10937a;
    --mint-800:#0c7361;
    --mint-900:#0a5b4e;

    --bg:#0b1220;               /* deep slate */
    --card:#0f172a80;           /* glass on dark */
    --card-solid:#0f172a;       /* solid variant */
    --text:#e6f6f0;             /* off-white */
    --muted:#a7c3bb;
    --ring: var(--mint-400);
    --danger:#ff5a5a;

    --radius-xl: 1.25rem;
    --radius-2xl: 1.75rem;
    --shadow-1: 0 8px 20px rgba(0,0,0,.25);
    --shadow-2: 0 20px 40px rgba(0,0,0,.35);
    --blur: blur(12px);
    --speed: .55s;
    --ease: cubic-bezier(.2,.7,.2,1);
  }

  *{ box-sizing:border-box }
  html,body{ height:100% }
  body{
    margin:0;
    font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", sans-serif;
    color:var(--text);
    background:
      radial-gradient(1200px 600px at 5% 0%, rgba(46,211,168,0.15), transparent 60%),
      radial-gradient(900px 500px at 100% 10%, rgba(16,147,122,0.15), transparent 60%),
      linear-gradient(180deg, #0a1220 0%, #09121d 100%);
    overflow-x:hidden;
  }

  /* ---------- Utility ---------- */
  .container{ width: min(1120px, 94vw); margin: 0 auto; }
  .grid{ display:grid; gap:1.25rem; }
  .btn{
    display:inline-flex; align-items:center; gap:.6rem;
    padding:.9rem 1.1rem; border-radius:999px; border:1px solid transparent;
    background:linear-gradient(180deg, var(--mint-500), var(--mint-600));
    color:#06231d; font-weight:700; letter-spacing:.02em;
    box-shadow: inset 0 1px 0 rgba(255,255,255,.25), 0 10px 20px rgba(46,211,168,.25);
    transition: transform .2s var(--ease), box-shadow .2s var(--ease), filter .2s var(--ease);
    cursor:pointer; text-decoration:none; position:relative; overflow:hidden;
  }
  .btn:hover{ transform: translateY(-2px); box-shadow: 0 16px 30px rgba(46,211,168,.35); filter:saturate(1.02) brightness(1.03);}
  .btn:active{ transform: translateY(0); }
  .btn--ghost{
    background:transparent; color:var(--text);
    border-color:#2b374a; box-shadow:none; backdrop-filter: var(--blur);
  }
  .chip{ padding:.4rem .7rem; border-radius:999px; font-weight:700; font-size:.8rem; color:#06382e; background: linear-gradient(180deg, var(--mint-200), var(--mint-300)); display:inline-block; }

  /* ---------- Navbar ---------- */
  .nav{
    position:sticky; top:0; z-index:100;
    backdrop-filter: blur(14px);
    background: linear-gradient(180deg, rgba(15,23,42,.7), rgba(15,23,42,.35));
    border-bottom:1px solid rgba(255,255,255,.06);
  }
  .nav__inner{ display:flex; align-items:center; justify-content:space-between; padding:.7rem .8rem; }
  .brand{
    display:flex; align-items:center; gap:.7rem; text-decoration:none; color:var(--text);
  }
  .logo{
    width:36px; height:36px; border-radius:12px;
    overflow:hidden; display:grid; place-items:center;
    background: conic-gradient(from 210deg, var(--mint-400), var(--mint-700), var(--mint-500), var(--mint-400));
    box-shadow: 0 6px 20px rgba(46,211,168,.35);
  }
  .brand b{ font-size:1.05rem; letter-spacing:.02em }
  .nav__links{ display:flex; gap:.8rem; align-items:center; }
  .nav__links a{
    color:var(--muted); text-decoration:none; padding:.65rem .8rem; border-radius:10px; transition: color .2s, background-color .2s;
  }
  .nav__links a:hover{ color:var(--text); background:rgba(255,255,255,.04); }
  .nav__cta{ display:flex; gap:.6rem; align-items:center; }
  .hamburger{ display:none; background:transparent; border:0; width:44px; height:44px; border-radius:12px; color:var(--text); }
  .hamburger svg{ width:24px; height:24px }

  @media (max-width: 900px){
    .nav__links{ display:none; }
    .hamburger{ display:inline-grid; place-items:center; }
    .mobileMenu{
      position:fixed; inset:64px 12px auto 12px; border-radius:18px;
      background: rgba(15,23,42,.9); border: 1px solid rgba(255,255,255,.08);
      box-shadow: var(--shadow-2); padding:.8rem; display:none; z-index:99;
      animation: pop .35s var(--ease);
    }
    .mobileMenu.open{ display:block; }
    .mobileMenu a{ display:block; padding:.9rem 1rem; text-decoration:none; color:var(--text); border-radius:12px; }
    .mobileMenu a:hover{ background: rgba(255,255,255,.05); }
  }

  @keyframes pop{ from{ transform: translateY(-8px) scale(.98); opacity:0 } to{ transform:none; opacity:1 } }

  /* ---------- Hero ---------- */
  .hero{ position:relative; padding: clamp(3rem, 8vw, 6rem) 0 2rem; }
  .hero__wrap{
    display:grid; grid-template-columns: 1.1fr .9fr; gap:2rem; align-items:center;
  }
  .hero__title{
    font-weight:900; line-height:1.04; letter-spacing:-.02em;
    font-size: clamp(2.1rem, 4.1vw, 3.6rem);
  }
  .hero__lead{ color:var(--muted); font-size: clamp(1rem, 1.5vw, 1.15rem); margin:1rem 0 1.5rem }
  .hero__cta{ display:flex; flex-wrap:wrap; gap:.7rem }
  .hero__card{
    position:relative; border-radius: var(--radius-2xl);
    background: linear-gradient(180deg, rgba(16,27,46,.75), rgba(16,23,42,.55));
    border: 1px solid rgba(255,255,255,.08); padding:1.1rem; min-height: 240px;
    box-shadow: var(--shadow-1); overflow:hidden;
  }
  .glow{
    position:absolute; inset:-40% -20% auto auto; width: 70%; height: 140%;
    filter: blur(40px); background: radial-gradient(closest-side, rgba(46,211,168,.25), transparent 70%);
    transform: rotate(12deg);
  }
  .hero__stat{
    display:flex; align-items:center; gap:.9rem; padding:.7rem 1rem; border-radius:14px;
    background: rgba(46,211,168,.12); border:1px solid rgba(46,211,168,.25); width:max-content;
  }
  .stat__num{ font-size:1.6rem; font-weight:900; }
  @media (max-width: 980px){
    .hero__wrap{ grid-template-columns:1fr; }
  }

  /* ---------- Sections ---------- */
  .section{ padding: clamp(2.5rem, 6vw, 4rem) 0; }
  .section__head{ display:flex; align-items:flex-end; justify-content:space-between; margin-bottom:1.3rem; gap:1rem; }
  .section__title{ font-weight:800; font-size: clamp(1.3rem, 2.4vw, 1.9rem); letter-spacing:-.01em }
  .section__desc{ color:var(--muted) }

  .cards{ display:grid; grid-template-columns: repeat(12, 1fr); gap: 1rem; }
  .card{
    grid-column: span 4; min-height: 220px; border-radius: var(--radius-xl); position:relative;
    background: linear-gradient(180deg, rgba(16,23,42,.65), rgba(16,23,42,.45));
    border:1px solid rgba(255,255,255,.08); padding:1rem; overflow:hidden;
    transition: transform .35s var(--ease), box-shadow .35s var(--ease), border-color .35s var(--ease);
  }
  .card:hover{ transform: translateY(-4px); box-shadow: 0 18px 40px rgba(0,0,0,.35); border-color: rgba(46,211,168,.35) }
  .card__title{ font-weight:800; font-size:1.1rem; margin:.4rem 0 .4rem }
  .card__text{ color:var(--muted); font-size:.98rem; }
  .card__cta{ margin-top:1rem; display:flex; gap:.6rem; flex-wrap:wrap }
  .pill{
    display:inline-block; padding:.45rem .7rem; border-radius:999px; font-size:.75rem; color:#0a2f27; background: linear-gradient(180deg, var(--mint-200), var(--mint-300));
    border:1px solid rgba(46,211,168,.35)
  }
  .badge{
    position:absolute; top:10px; right:10px; font-weight:800; font-size:.75rem; letter-spacing:.06em;
    background: rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.12); padding:.35rem .6rem; border-radius:10px;
  }
  @media (max-width:1100px){ .card{ grid-column: span 6 } }
  @media (max-width:700px){ .card{ grid-column: span 12 } }

  /* ---------- Testimonials ---------- */
  .quotes{ display:grid; grid-template-columns: repeat(3,1fr); gap:1rem; }
  .quote{
    background: linear-gradient(180deg, rgba(16,23,42,.65), rgba(10,17,30,.55));
    border:1px solid rgba(255,255,255,.08); border-radius: var(--radius-xl); padding:1rem; min-height:150px;
  }
  .quote b{ display:block; margin-top:.8rem }

  @media (max-width:980px){ .quotes{ grid-template-columns:1fr } }

  /* ---------- Footer ---------- */
  .footer{
    margin-top:2rem; border-top:1px solid rgba(255,255,255,.08);
    background: linear-gradient(180deg, rgba(10,17,30,.7), rgba(10,17,30,.9));
    padding: 2rem 0 3rem; color:var(--muted);
  }
  .footer__grid{ display:grid; grid-template-columns:2fr 1fr 1fr 1fr; gap:1rem }
  .footer a{ color:var(--muted); text-decoration:none }
  .footer a:hover{ color:var(--text) }
  @media (max-width:980px){ .footer__grid{ grid-template-columns:1fr 1fr } }
  @media (max-width:640px){ .footer__grid{ grid-template-columns:1fr } }

  /* ---------- Reveal on scroll ---------- */
  .reveal{ opacity:0; transform: translateY(18px) scale(.98); }
  .reveal.in{ opacity:1; transform:none; transition: opacity var(--speed) var(--ease), transform var(--speed) var(--ease); }

  /* ---------- Modals ---------- */
  .modal-backdrop{
    position:fixed; inset:0; background: rgba(0,0,0,.55); display:none; place-items:center; z-index:120;
  }
  .modal-backdrop.show{ display:grid; animation: fadeIn .25s ease; }
  @keyframes fadeIn{ from{ opacity:0 } to{ opacity:1 } }
  .modal{
    width: min(480px, 92vw); border-radius: 22px; padding: 1.2rem;
    background: linear-gradient(180deg, rgba(16,23,42,.95), rgba(16,23,42,.75));
    border: 1px solid rgba(255,255,255,.1); box-shadow: var(--shadow-2);
    transform: translateY(10px) scale(.98); opacity:0; transition: all .35s var(--ease);
  }
  .modal.show{ transform:none; opacity:1 }
  .form{ display:grid; gap:.75rem; margin-top:.7rem }
  .input{
    width:100%; padding:.9rem 1rem; border-radius: 12px; background: rgba(255,255,255,.04);
    border:1px solid rgba(255,255,255,.08); color:var(--text); outline:none;
    transition:border-color .2s;
  }
  .input:focus{ border-color: var(--ring); box-shadow: 0 0 0 3px rgba(46,211,168,.2) }
  .helper{ color:var(--muted); font-size:.85rem }
  .danger{ color:var(--danger); font-size:.9rem }

  /* ---------- Reduce Motion ---------- */
  @media (prefers-reduced-motion: reduce){
    .reveal{ transition:none !important; transform:none !important; opacity:1 !important; }
    .btn, .card{ transition:none !important; }
  }
</style>
</head>
<body>

<!-- ================= NAV ================= -->
<header class="nav">
  <div class="container nav__inner">
    <a class="brand" href="#">
      <div class="logo" aria-hidden="true">
        <!-- simple pulse glyph -->
        <svg viewBox="0 0 48 48" width="24" height="24">
          <path d="M6 26h8l4-12 6 20 4-12h10" fill="none" stroke="#03221b" stroke-width="6" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M6 26h8l4-12 6 20 4-12h10" fill="none" stroke="#b9ffe3" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
      <b>Your Fitness</b>
    </a>

    <nav class="nav__links" aria-label="Primary">
      <a href="weight-loss.html">Weight Loss</a>
      <a href="weight-gain.html">Weight Gain</a>
      <a href="calories.html">Calories</a>
      <a href="exercises.html">Exercises</a>
      <a href="premium.html">Premium</a>
    </nav>

    <div class="nav__cta">
      <button class="btn btn--ghost" id="loginBtn" aria-haspopup="dialog" aria-controls="loginModal">Log in</button>
      <button class="btn" id="signupBtn" aria-haspopup="dialog" aria-controls="signupModal">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 5v14M5 12h14" stroke="#06382e" stroke-width="2.6" stroke-linecap="round"/></svg>
        Sign up
      </button>
      <button class="hamburger" id="hamburger" aria-label="Open menu">
        <svg viewBox="0 0 24 24" fill="none"><path d="M4 6h16M4 12h16M4 18h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
      </button>
    </div>
  </div>
  <div class="mobileMenu" id="mobileMenu" role="dialog" aria-modal="true" aria-label="Mobile menu">
    <a href="weight-loss.html">Weight Loss</a>
    <a href="weight-gain.html">Weight Gain</a>
    <a href="calories.html">Calories</a>
    <a href="exercises.html">Exercises</a>
    <a href="premium.html">Premium</a>
    <hr style="border-color:rgba(255,255,255,.08); border-top:1px solid rgba(255,255,255,.08); margin:.4rem 0">
    <a href="#" id="mLogin">Log in</a>
    <a href="#" id="mSignup">Sign up</a>
  </div>
</header>

<main id="page">

  <!-- ================= HERO ================= -->
  <section class="hero container">
    <div class="hero__wrap">
      <div class="reveal">
        <span class="chip">Mint-powered fitness</span>
        <h1 class="hero__title">Smarter tracking. Cleaner design. <span style="background:linear-gradient(180deg,var(--mint-200),var(--mint-500)); -webkit-background-clip:text; background-clip:text; color:transparent;">Faster progress.</span></h1>
        <p class="hero__lead">Log foods with a tap, explore a global exercise library, and visualize your journey—all in a premium, performance-first interface.</p>
        <div class="hero__cta">
          <a class="btn" href="calories.html">Open Calorie Tracker</a>
          <a class="btn btn--ghost" href="exercises.html">Browse Exercises</a>
        </div>

        <div class="hero__stat" style="margin-top:1rem">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none" aria-hidden="true"><circle cx="12" cy="12" r="9" stroke="var(--mint-400)" stroke-width="2"/><path d="M12 7v5l3 3" stroke="var(--mint-400)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
          <div>
            <div class="stat__num" data-countto="1250000">0</div>
            <div class="helper">Calories logged by our users</div>
          </div>
        </div>
      </div>

      <div class="hero__card reveal" aria-hidden="true">
        <div class="glow"></div>
        <div class="grid" style="grid-template-columns:1fr 1fr; gap:.8rem;">
          <div class="mini card" style="min-height:auto; padding:.9rem;">
            <span class="badge">Weight</span>
            <div class="card__title">Weekly Trend</div>
            <div id="sparkline" style="height:80px; width:100%;"></div>
            <div class="helper">Auto-updates as you log</div>
          </div>
          <div class="mini card" style="min-height:auto; padding:.9rem;">
            <span class="badge">Macros</span>
            <div class="card__title">Today’s Split</div>
            <div id="macros" style="height:80px; width:100%; display:flex; align-items:center; gap:.4rem"></div>
            <div class="helper">Proteins • Carbs • Fats</div>
          </div>
          <div class="mini card" style="grid-column: span 2; min-height:auto; padding:.9rem;">
            <span class="badge">Goal</span>
            <div class="card__title">You’re 68% to your target 🎯</div>
            <div style="height:10px; background:#1f2a3b; border-radius:999px; overflow:hidden; border:1px solid rgba(255,255,255,.08)">
              <div id="goalbar" style="height:100%; width:0%; background: linear-gradient(90deg, var(--mint-400), var(--mint-700));"></div>
            </div>
            <div class="helper">Keep logging to boost momentum</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ================= FEATURE CARDS ================= -->
  <section class="section">
    <div class="container">
      <div class="section__head">
        <h2 class="section__title">Everything you need to hit your goals</h2>
        <p class="section__desc">Designed to feel fast, look premium, and work flawlessly on your phone.</p>
      </div>

      <div class="cards">
        <!-- Weight Loss -->
        <article class="card reveal">
          <span class="badge">Popular</span>
          <div class="card__title">Weight Loss</div>
          <p class="card__text">Science-backed guidance with dynamic progress bars, milestone badges, and smart tips tailored to your entries.</p>
          <div class="card__cta">
            <a class="btn" href="weight-loss.html">Start Losing</a>
            <span class="pill">Balanced plans</span>
            <span class="pill">Trend charts</span>
          </div>
        </article>

        <!-- Weight Gain -->
        <article class="card reveal">
          <span class="badge">New</span>
          <div class="card__title">Weight Gain</div>
          <p class="card__text">Build healthy mass with high-calorie meal ideas, hypertrophy routines, and weekly growth visualizations.</p>
          <div class="card__cta">
            <a class="btn" href="weight-gain.html">Build Up</a>
            <span class="pill">High-cal meals</span>
            <span class="pill">Hypertrophy</span>
          </div>
        </article>

        <!-- Calories -->
        <article class="card reveal">
          <span class="badge">AI</span>
          <div class="card__title">Calories & Food</div>
          <p class="card__text">Type to search millions of foods or snap a photo to auto-detect what’s on your plate.</p>
          <div class="card__cta">
            <a class="btn" href="calories.html">Open Tracker</a>
            <span class="pill">Photo-to-calories</span>
            <span class="pill">Macros</span>
          </div>
        </article>

        <!-- Exercises -->
        <article class="card reveal">
          <div class="card__title">Exercises</div>
          <p class="card__text">Thousand-plus moves across strength, cardio, and mobility—each with clear cues and target muscles.</p>
          <div class="card__cta">
            <a class="btn" href="exercises.html">Browse Library</a>
            <span class="pill">Filters</span>
            <span class="pill">Favourites</span>
          </div>
        </article>

        <!-- Premium -->
        <article class="card reveal">
          <div class="card__title">Premium</div>
          <p class="card__text">Unlock pro features: advanced analytics, export, custom goals, and priority updates.</p>
          <div class="card__cta">
            <a class="btn" href="premium.html">See Plans</a>
            <span class="pill">Charts</span>
            <span class="pill">Data export</span>
          </div>
        </article>

        <!-- Famous Foods -->
        <article class="card reveal">
          <div class="card__title">Famous Foods</div>
          <p class="card__text">Explore a curated gallery of global dishes with calories per typical serving and quick-append to your log.</p>
          <div class="card__cta">
            <a class="btn" href="foods.html">Explore</a>
            <span class="pill">Global</span>
            <span class="pill">Images</span>
          </div>
        </article>
      </div>
    </div>
  </section>

  <!-- ================= TESTIMONIALS ================= -->
  <section class="section">
    <div class="container">
      <div class="section__head">
        <h2 class="section__title">Loved for its clean, calm feel</h2>
        <p class="section__desc">Subtle mint, smooth motion—zero clutter.</p>
      </div>
      <div class="quotes">
        <div class="quote reveal">“Finally a tracker that doesn’t feel like work. The animations make it satisfying to use.” <b>— Arjun</b></div>
        <div class="quote reveal">“Photo-to-calories is scary good. It nailed my paneer wrap and even the sauce.” <b>— Neha</b></div>
        <div class="quote reveal">“Weights + macros + trends all in one place. And it looks premium on my phone.” <b>— Kabir</b></div>
      </div>
    </div>
  </section>
</main>

<!-- ================= FOOTER ================= -->
<footer class="footer">
  <div class="container footer__grid">
    <div>
      <div class="brand" style="margin-bottom:.6rem">
        <div class="logo" aria-hidden="true"></div><b>Your Fitness</b>
      </div>
      <p>Track what matters and enjoy the process. Designed with motion, built for focus.</p>
    </div>
    <div>
      <b style="color:var(--text)">Product</b>
      <div style="margin-top:.7rem; display:grid; gap:.4rem">
        <a href="weight-loss.html">Weight Loss</a>
        <a href="weight-gain.html">Weight Gain</a>
        <a href="calories.html">Calorie Tracker</a>
        <a href="exercises.html">Exercises</a>
      </div>
    </div>
    <div>
      <b style="color:var(--text)">Company</b>
      <div style="margin-top:.7rem; display:grid; gap:.4rem">
        <a href="about.html">About</a>
        <a href="contact.html">Contact</a>
        <a href="premium.html">Premium</a>
      </div>
    </div>
    <div>
      <b style="color:var(--text)">Account</b>
      <div style="margin-top:.7rem; display:grid; gap:.4rem">
        <a href="#" id="fLogin">Log in</a>
        <a href="#" id="fSignup">Sign up</a>
      </div>
    </div>
  </div>
</footer>

<!-- ================= AUTH MODALS ================= -->
<div class="modal-backdrop" id="loginModal" role="dialog" aria-modal="true" aria-label="Log in">
  <div class="modal" role="document" aria-describedby="loginDesc">
    <h3 style="margin:0">Welcome back</h3>
    <p id="loginDesc" class="helper">Log in to sync your progress.</p>
    <form class="form" id="loginForm">
      <input class="input" type="email" name="email" placeholder="Email" required />
      <input class="input" type="password" name="password" placeholder="Password" minlength="6" required />
      <button class="btn" type="submit">Log in</button>
      <div class="danger" id="loginError" hidden></div>
    </form>
    <p class="helper">New here? <a href="#" id="swapToSignup">Create an account</a></p>
  </div>
</div>

<div class="modal-backdrop" id="signupModal" role="dialog" aria-modal="true" aria-label="Sign up">
  <div class="modal" role="document" aria-describedby="signupDesc">
    <h3 style="margin:0">Create your account</h3>
    <p id="signupDesc" class="helper">Takes less than a minute.</p>
    <form class="form" id="signupForm">
      <input class="input" type="text" name="name" placeholder="Name" required />
      <input class="input" type="email" name="email" placeholder="Email" required />
      <input class="input" type="password" name="password" placeholder="Password (min 6 chars)" minlength="6" required />
      <button class="btn" type="submit">Sign up</button>
      <div class="danger" id="signupError" hidden></div>
    </form>
    <p class="helper">Have an account? <a href="#" id="swapToLogin">Log in</a></p>
  </div>
</div>

<script>
/* ========= Mobile menu ========= */
const hamburger = document.getElementById('hamburger');
const mobileMenu = document.getElementById('mobileMenu');
const toggleMenu = () => mobileMenu.classList.toggle('open');
hamburger.addEventListener('click', toggleMenu);
document.addEventListener('click', (e)=> {
  if(!mobileMenu.contains(e.target) && !hamburger.contains(e.target)) mobileMenu.classList.remove('open');
});

/* ========= Reveal on scroll ========= */
const revealer = new IntersectionObserver(entries=>{
  entries.forEach(entry=>{
    if(entry.isIntersecting) entry.target.classList.add('in');
  });
},{ threshold:.15 });
document.querySelectorAll('.reveal').forEach(el=> revealer.observe(el));

/* ========= Counters (animated) ========= */
function countTo(el, end, duration=1500){
  const start = 0;
  const startTime = performance.now();
  const fmt = (n) => n >= 1000 ? n.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") : n;
  function tick(now){
    const p = Math.min(1, (now - startTime)/duration);
    const val = Math.floor(start + (end - start) * (p < .5 ? 2*p*p : -1+(4-2*p)*p)); // easeInOutQuad
    el.textContent = fmt(val);
    if(p < 1) requestAnimationFrame(tick);
  }
  requestAnimationFrame(tick);
}
const stat = document.querySelector('.stat__num');
if(stat){ const target = parseInt(stat.dataset.countto,10) || 1250000; setTimeout(()=> countTo(stat, target, 1800), 300); }

/* ========= Tiny sparkline + goal bar (no libs) ========= */
(function sparkline(){
  const el = document.getElementById('sparkline');
  if(!el) return;
  const w = el.clientWidth, h = el.clientHeight;
  const svgNS = "http://www.w3.org/2000/svg";
  const svg = document.createElementNS(svgNS, 'svg');
  svg.setAttribute('viewBox', `0 0 ${w} ${h}`);
  svg.setAttribute('width', w); svg.setAttribute('height', h);
  const data = [72.4,72.1,71.8,71.2,70.9,70.6,70.2,70.0,69.7,69.4,69.1,68.9];
  const min = Math.min(...data)-.5, max = Math.max(...data)+.5;
  const points = data.map((v,i)=>{
    const x = (i/(data.length-1))*w;
    const y = h - ((v-min)/(max-min))*h;
    return [x,y];
  });
  const path = document.createElementNS(svgNS, 'path');
  const d = points.map((p,i)=> (i? 'L':'M') + p[0].toFixed(1) + ' ' + p[1].toFixed(1)).join(' ');
  path.setAttribute('d', d);
  path.setAttribute('fill','none');
  path.setAttribute('stroke','url(#g)');
  path.setAttribute('stroke-width','2.5');
  path.style.filter = 'drop-shadow(0 2px 6px rgba(46,211,168,.3))';

  const defs = document.createElementNS(svgNS,'defs');
  const grad = document.createElementNS(svgNS,'linearGradient');
  grad.id='g'; grad.setAttribute('x1','0'); grad.setAttribute('x2','1'); grad.setAttribute('y1','0'); grad.setAttribute('y2','0');
  let s1=document.createElementNS(svgNS,'stop'); s1.setAttribute('offset','0%'); s1.setAttribute('stop-color','var(--mint-400)');
  let s2=document.createElementNS(svgNS,'stop'); s2.setAttribute('offset','100%'); s2.setAttribute('stop-color','var(--mint-700)');
  grad.append(s1,s2); defs.appendChild(grad);
  svg.append(defs, path);

  // animated dot
  const dot = document.createElementNS(svgNS,'circle');
  dot.setAttribute('r','4.5'); dot.setAttribute('fill','var(--mint-300)');
  svg.appendChild(dot);
  el.appendChild(svg);

  let t=0; const total = 2200;
  function animate(nowStart){
    const start = performance.now();
    function step(now){
      const p = Math.min(1, (now - start)/total);
      const idx = Math.floor(p*(points.length-1));
      dot.setAttribute('cx', points[idx][0]);
      dot.setAttribute('cy', points[idx][1]);
      if(p<1) requestAnimationFrame(step); else setTimeout(()=>requestAnimationFrame(animate), 500);
    }
    requestAnimationFrame(step);
  }
  animate();
})();

(function goal(){
  const bar = document.getElementById('goalbar');
  if(!bar) return;
  setTimeout(()=>{
    bar.style.transition = 'width 1.2s var(--ease)';
    bar.style.width = '68%';
  }, 450);
})();

(function macros(){
  const wrap = document.getElementById('macros');
  if(!wrap) return;
  const totals = { protein: 110, carbs: 210, fat: 60 };
  const sum = totals.protein + totals.carbs + totals.fat;
  const mk = (label,val)=>{
    const outer = document.createElement('div');
    outer.style.flex='1'; outer.style.height='10px'; outer.style.background='#1f2a3b';
    outer.style.border='1px solid rgba(255,255,255,.08)'; outer.style.borderRadius='999px'; outer.style.overflow='hidden';
    const inner = document.createElement('div');
    inner.style.height='100%'; inner.style.width='0%';
    inner.style.background='linear-gradient(90deg, var(--mint-400), var(--mint-700))';
    inner.style.transition='width 1s var(--ease)';
    const cap = document.createElement('div');
    cap.textContent = label + ' ' + val + 'g';
    cap.className='helper';
    wrap.append(outer); outer.append(inner); wrap.append(cap);
    setTimeout(()=> inner.style.width = Math.max(6, Math.round((val/sum)*100)) + '%', 300);
  };
  mk('Protein', totals.protein); mk('Carbs', totals.carbs); mk('Fats', totals.fat);
})();

/* ========= Simple auth modal (front-end only) ========= */
const qs = (s)=>document.querySelector(s);
const loginModal = qs('#loginModal');
const signupModal = qs('#signupModal');
function openModal(m){ m.classList.add('show'); setTimeout(()=> m.querySelector('.modal').classList.add('show'), 10); }
function closeModal(m){ m.querySelector('.modal').classList.remove('show'); setTimeout(()=> m.classList.remove('show'), 200); }

['loginBtn','fLogin','mLogin'].forEach(id=>{
  const el = document.getElementById(id);
  if(el) el.addEventListener('click', (e)=>{ e.preventDefault(); openModal(loginModal); });
});
['signupBtn','fSignup','mSignup'].forEach(id=>{
  const el = document.getElementById(id);
  if(el) el.addEventListener('click', (e)=>{ e.preventDefault(); openModal(signupModal); });
});

[loginModal, signupModal].forEach(backdrop=>{
  backdrop.addEventListener('click', (e)=>{ if(e.target === backdrop) closeModal(backdrop); });
});
qs('#swapToSignup')?.addEventListener('click', (e)=>{ e.preventDefault(); closeModal(loginModal); setTimeout(()=> openModal(signupModal), 150); });
qs('#swapToLogin')?.addEventListener('click', (e)=>{ e.preventDefault(); closeModal(signupModal); setTimeout(()=> openModal(loginModal), 150); });

/* ========= Demo forms (front-end validation only) ========= */
qs('#loginForm')?.addEventListener('submit', (e)=>{
  e.preventDefault();
  const err = qs('#loginError');
  const email = e.target.email.value.trim();
  const pass = e.target.password.value.trim();
  err.hidden = true;
  if(!/^\S+@\S+\.\S+$/.test(email)){ err.textContent = 'Enter a valid email.'; err.hidden = false; return; }
  if(pass.length < 6){ err.textContent = 'Password must be 6+ characters.'; err.hidden = false; return; }
  // Success animation
  e.target.querySelector('button').textContent = 'Welcome 👋';
  setTimeout(()=> closeModal(loginModal), 600);
});
qs('#signupForm')?.addEventListener('submit', (e)=>{
  e.preventDefault();
  const err = qs('#signupError');
  const { name, email, password } = e.target;
  err.hidden = true;
  if(name.value.trim().length < 2){ err.textContent = 'Enter your name.'; err.hidden = false; return; }
  if(!/^\S+@\S+\.\S+$/.test(email.value)){ err.textContent = 'Enter a valid email.'; err.hidden = false; return; }
  if(password.value.length < 6){ err.textContent = 'Password must be 6+ characters.'; err.hidden = false; return; }
  e.target.querySelector('button').textContent = 'Creating…';
  setTimeout(()=>{ e.target.querySelector('button').textContent = 'Done ✅'; setTimeout(()=> closeModal(signupModal), 500); }, 600);
});

/* ========= Smooth internal transitions ========= */
document.querySelectorAll('a[href$=".html"]').forEach(a=>{
  a.addEventListener('click', (e)=>{
    // Graceful fade-out before navigation (only same-origin real links)
    if(e.metaKey || e.ctrlKey) return;
    e.preventDefault();
    const href = a.getAttribute('href');
    document.body.style.transition = 'opacity .25s ease';
    document.body.style.opacity = '0';
    setTimeout(()=> location.href = href, 200);
  });
});
</script>
</body>
</html>
